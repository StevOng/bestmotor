{% load static %}
{% load humanize %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}{% endblock %}</title>
    <link
      href="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.datatables.net/2.2.2/css/dataTables.dataTables.css"
    />
    <link rel="stylesheet" href="{% static 'css/tailwind_output.css' %}" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
      rel="stylesheet"
    />
    <style>
      /* Style box input Select2 */
      .select2-container .select2-selection--single {
        display: flex;
        align-items: center;
        height: 40px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        font-size: 16px;
        cursor: pointer;
      }

      .select2-selection__arrow {
        top: unset !important;
      }
      .fade-out {
        opacity: 0;
        transition: opacity 0.4s ease-out;
      }
    </style>
    {% block style %}{% endblock %}
  </head>
  <body>
    <!-- Overlay & Modal Akun -->
    <div
      id="popupModalAkun"
      class="fixed inset-0 hidden items-center justify-center z-50"
    >
      <div
        class="bg-white w-full h-96 p-6 rounded-lg shadow-lg flex flex-col md:w-1/2"
      >
        <div class="p-2 mb-4 h-full">
          <div class="grid grid-cols-3 mb-3 items-center w-full">
            <button
              onclick="closeModalAkun()"
              class="flex text-xl justify-start"
            >
              <i class="fa-solid fa-arrow-left fa-sm m-2 text-gray-500"></i>
            </button>
            <h2 class="text-lg font-semibold text-center md:text-xl">
              Account
            </h2>
          </div>
          <div class="space-y-3 text-base md:text-lg">
            <div class="flex">
              <p class="font-semibold w-24 text-left">Username</p>
              <p>: Admin Toko</p>
            </div>
            <div class="flex">
              <p class="font-semibold w-24 text-left">E-mail</p>
              <p>: bestmotor@gmail.com</p>
            </div>
            <div class="flex">
              <p class="font-semibold w-24 text-left">Password</p>
              <p>: ********</p>
            </div>
          </div>
          <p class="text-red-500 text-xs">
            Ingin mengubah password? kunjungi menu bantuan!
          </p>
        </div>
      </div>
    </div>

    {% comment %} Navigation Bar {% endcomment %}
    <nav
      class="fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 dark:bg-gray-800 dark:border-gray-700 lg:left-60"
    >
      <div class="px-3 py-3 lg:px-5 lg:pl-3">
        <div class="flex items-center justify-between">
          <div class="flex items-center justify-start">
            <button
              data-drawer-target="logo-sidebar"
              data-drawer-toggle="logo-sidebar"
              aria-controls="logo-sidebar"
              type="button"
              class="inline-flex items-center p-2 text-sm rounded-lg lg:hidden bg-customBlue hover:bg-customBlue focus:outline-none focus:ring-2 focus:ring-customBlue focus:bg-customBlue dark:text-gray-400 dark:hover:bg-customBlue dark:focus:ring-gray-600"
            >
              <span class="sr-only">Open sidebar</span>
              <svg
                class="w-6 h-6 text-white dark:text-white"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                fill="none"
                viewBox="0 0 24 24"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-width="2"
                  d="M5 7h14M5 12h14M5 17h14"
                />
              </svg>
            </button>
          </div>
          <div class="flex items-center">
            <div class="flex items-center ms-3">
              <div>
                <button
                  id="dropdownNotificationButton"
                  data-dropdown-toggle="dropdownNotification"
                  class="m-1 mr-3 relative inline-flex items-center text-sm font-medium text-center text-gray-500 hover:text-gray-900 focus:outline-none dark:hover:text-white dark:text-gray-400"
                  type="button"
                >
                  <svg
                    class="w-5 h-5"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="currentColor"
                    viewBox="0 0 14 20"
                  >
                    <path
                      d="M12.133 10.632v-1.8A5.406 5.406 0 0 0 7.979 3.57.946.946 0 0 0 8 3.464V1.1a1 1 0 0 0-2 0v2.364a.946.946 0 0 0 .021.106 5.406 5.406 0 0 0-4.154 5.262v1.8C1.867 13.018 0 13.614 0 14.807 0 15.4 0 16 .538 16h12.924C14 16 14 15.4 14 14.807c0-1.193-1.867-1.789-1.867-4.175ZM3.823 17a3.453 3.453 0 0 0 6.354 0H3.823Z"
                    />
                  </svg>

                  <div
                    class="absolute block w-3 h-3 bg-red-500 border-2 border-white rounded-full -top-0.5 start-2.5 dark:border-gray-900"
                  ></div>
                </button>
                {% comment %} Dropdown notification menu {% endcomment %}
                <div
                  id="dropdownNotification"
                  class="z-20 hidden w-full max-w-72 bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-800 dark:divide-gray-700"
                  aria-labelledby="dropdownNotificationButton"
                >
                  <div
                    class="block px-4 py-2 font-medium text-center text-customBlue rounded-t-lg bg-gray-50 dark:bg-gray-800 dark:text-white"
                  >
                    Notifications
                  </div>
                  <div class="divide-y divide-gray-100 dark:divide-gray-700">
                    <div
                      class="flex px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700"
                    >
                      <div class="w-full ps-3">
                        <div
                          class="text-gray-500 text-sm mb-1.5 dark:text-gray-400"
                        >
                          <p
                            class="font-semibold text-gray-900 dark:text-white"
                          >
                            New Alert from Barang
                          </p>
                          Stok Barang "Kampas Rem Vario 3X" hampir habis
                        </div>
                      </div>
                      <button>
                        <i
                          class="fa-regular fa-trash-can text-2xl text-red-500"
                        ></i>
                      </button>
                    </div>
                    <div
                      class="flex px-4 py-3 hover:bg-gray-100 dark:hover:bg-gray-700"
                    >
                      <div class="w-full ps-3">
                        <div
                          class="text-gray-500 text-sm mb-1.5 dark:text-gray-400"
                        >
                          <p
                            class="font-semibold text-gray-900 dark:text-white"
                          >
                            New Alert from Barang
                          </p>
                          Stok Barang "Kampas Rem Vario 3X" hampir habis
                        </div>
                      </div>
                      <button>
                        <i
                          class="fa-regular fa-trash-can text-2xl text-red-500"
                        ></i>
                      </button>
                    </div>
                  </div>
                  <a
                    href="#"
                    class="block py-2 text-sm font-medium text-center text-gray-900 rounded-b-lg bg-gray-50 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 dark:text-white"
                  >
                    <div class="inline-flex items-center">
                      <svg
                        class="w-4 h-4 me-2 text-gray-500 dark:text-gray-400"
                        aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg"
                        fill="currentColor"
                        viewBox="0 0 20 14"
                      >
                        <path
                          d="M10 0C4.612 0 0 5.336 0 7c0 1.742 3.546 7 10 7 6.454 0 10-5.258 10-7 0-1.664-4.612-7-10-7Zm0 10a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z"
                        />
                      </svg>
                      View all
                    </div>
                  </a>
                </div>
              </div>
              <div>
                <button
                  id="dropdownAvatarNameButton"
                  data-dropdown-toggle="dropdownAvatarName"
                  class="flex items-center text-sm pe-1 font-medium text-gray-900 rounded-full hover:text-customBlue dark:hover:text-white md:me-0 focus:ring-4 focus:ring-gray-100 dark:focus:ring-gray-700 dark:text-white"
                  type="button"
                >
                  <span class="sr-only">Open user menu</span>
                  <img
                    class="w-8 h-8 me-2 rounded-full"
                    src="{% static 'images/logo.png' %}"
                    alt="user photo"
                  />
                  User Admin
                  <svg
                    class="w-2.5 h-2.5 ms-3"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 10 6"
                  >
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="m1 1 4 4 4-4"
                    />
                  </svg>
                </button>
              </div>
              <div
                id="dropdownAvatarName"
                class="z-10 hidden bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700 dark:divide-gray-600"
              >
                <div class="px-4 py-3 text-sm text-gray-900 dark:text-white">
                  <div class="font-medium">User Admin</div>
                  <div class="truncate">admin1@gmail.com</div>
                </div>
                <ul
                  class="py-2 text-sm text-gray-700 dark:text-gray-200"
                  aria-labelledby="dropdownInformdropdownAvatarNameButtonationButton"
                >
                  <li>
                    <button
                      onclick="openModalAkun()"
                      class="flex w-full items-start px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-600 dark:hover:text-white"
                    >
                      Account
                    </button>
                    <a
                      href="{% url 'login' %}"
                      class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white"
                      >Sign out</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>
    {% comment %} Sidebar {% endcomment %}
    <aside
      id="logo-sidebar"
      class="fixed top-16 left-0 z-40 w-60 h-full transition-transform -translate-x-full bg-white border-r border-gray-200 lg:translate-x-0 dark:bg-gray-800 dark:border-gray-700 lg:top-0"
      aria-label="Sidebar"
    >
      <div class="h-full px-3 pb-4 overflow-y-auto bg-white dark:bg-gray-800">
        <a href="/" class="flex justify-center my-2">
          <img
            src="{% static 'images/logo.png' %}"
            class="h-20 me-3 rounded-full"
            alt="BestMotor Logo"
          />
        </a>
        <ul class="space-y-2 font-medium">
          <li>
            <a
              href="/dashboard"
              class="flex items-center p-2 rounded-lg group text-gray-500 dark:text-gray-400 hover:text-white hover:bg-customBlue focus:text-white dark:hover:text-white dark:focus:text-white focus:bg-customBlue dark:hover:bg-customBlue {% if request.path == '/dashboard/' %}text-white bg-customBlue {% endif %}"
            >
              <svg
                class="w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-white group-focus:text-white dark:group-hover:text-white {% if request.path == '/dashboard/' %}text-white{% endif %}"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="21"
                viewBox="0 0 20 21"
                fill="none"
              >
                <path
                  d="M10 10.5L17.5 10.5M10 3L10 18M6.5 3H13.5C14.9001 3 15.6002 3 16.135 3.27248C16.6054 3.51217 16.9878 3.89462 17.2275 4.36502C17.5 4.8998 17.5 5.59987 17.5 7V14C17.5 15.4001 17.5 16.1002 17.2275 16.635C16.9878 17.1054 16.6054 17.4878 16.135 17.7275C15.6002 18 14.9001 18 13.5 18H6.5C5.09987 18 4.3998 18 3.86502 17.7275C3.39462 17.4878 3.01217 17.1054 2.77248 16.635C2.5 16.1002 2.5 15.4001 2.5 14V7C2.5 5.59987 2.5 4.8998 2.77248 4.36502C3.01217 3.89462 3.39462 3.51217 3.86502 3.27248C4.3998 3 5.09987 3 6.5 3Z"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span class="ms-3">Dashboard</span>
            </a>
          </li>
          <li>
            <a
              href="/pesanan"
              class="flex items-center p-2 rounded-lg group text-gray-500 dark:text-gray-400 hover:text-white hover:bg-customBlue focus:text-white dark:hover:text-white dark:focus:text-white focus:bg-customBlue dark:hover:bg-customBlue {% if '/pesanan/' in request.path %}text-white bg-customBlue {% endif %}"
            >
              <svg
                class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-white group-focus:text-white dark:group-hover:text-white {% if '/pesanan/' in request.path %}text-white{% endif %}"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="21"
                viewBox="0 0 20 21"
                fill="none"
              >
                <path
                  d="M13.334 7.99996V5.49996C13.334 3.65901 11.8416 2.16663 10.0006 2.16663C8.15968 2.16663 6.6673 3.65901 6.6673 5.49996V7.99996M2.99397 9.1266L2.49397 14.4599C2.35181 15.9763 2.28072 16.7346 2.53234 17.3202C2.75338 17.8347 3.14073 18.26 3.63232 18.5281C4.1919 18.8333 4.95344 18.8333 6.47651 18.8333H13.5248C15.0478 18.8333 15.8094 18.8333 16.3689 18.5281C16.8605 18.26 17.2479 17.8347 17.4689 17.3202C17.7205 16.7346 17.6495 15.9763 17.5073 14.4599L17.0073 9.1266C16.8872 7.84608 16.8272 7.20582 16.5392 6.72176C16.2856 6.29545 15.9109 5.95422 15.4628 5.7415C14.954 5.49996 14.3109 5.49996 13.0248 5.49996L6.97651 5.49996C5.69037 5.49996 5.04731 5.49996 4.53848 5.74149C4.09035 5.95422 3.71564 6.29545 3.46202 6.72176C3.17404 7.20582 3.11402 7.84608 2.99397 9.1266Z"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span class="flex-1 ms-3 whitespace-nowrap">Pesanan</span>
            </a>
          </li>
          <li>
            <button
              type="button"
              class="flex items-center w-full p-2 text-base transition duration-75 rounded-lg group text-gray-500 dark:text-gray-400 hover:text-white hover:bg-customBlue focus:text-white dark:hover:text-white dark:focus:text-white focus:bg-customBlue dark:hover:bg-customBlue {% if '/barang' in request.path %}text-white bg-customBlue {% endif %}"
              aria-controls="dropdown-barang"
              data-collapse-toggle="dropdown-barang"
            >
              <svg
                class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-white group-focus:text-white dark:group-hover:text-white {% if '/barang' in request.path %}text-white{% endif %}"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="21"
                viewBox="0 0 20 21"
                fill="none"
              >
                <path
                  d="M13.3332 7.16667C13.3332 8.05072 12.982 8.89857 12.3568 9.52369C11.7317 10.1488 10.8839 10.5 9.99982 10.5C9.11576 10.5 8.26792 10.1488 7.6428 9.52369C7.01768 8.89857 6.66649 8.05072 6.66649 7.16667M3.0275 6.66782L2.44417 13.6678C2.31885 15.1716 2.2562 15.9235 2.51039 16.5035C2.73372 17.0131 3.12068 17.4336 3.60997 17.6985C4.16688 18 4.92137 18 6.43035 18H13.5693C15.0783 18 15.8328 18 16.3897 17.6985C16.879 17.4336 17.2659 17.0131 17.4892 16.5035C17.7434 15.9235 17.6808 15.1716 17.5555 13.6678L16.9721 6.66782C16.8643 5.37396 16.8104 4.72703 16.5239 4.23738C16.2716 3.8062 15.8959 3.4605 15.4452 3.24487C14.9335 3 14.2843 3 12.986 3L7.01369 3C5.71534 3 5.06617 3 4.55442 3.24487C4.10377 3.4605 3.72807 3.8062 3.47576 4.23738C3.18923 4.72703 3.13532 5.37396 3.0275 6.66782Z"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span class="flex-1 ms-3 text-left whitespace-nowrap"
                >Barang</span
              >
              <svg
                class="w-3 h-3"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 10 6"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="m1 1 4 4 4-4"
                />
              </svg>
            </button>
            <ul id="dropdown-barang" class="hidden py-2 space-y-2">
              <li>
                <a
                  href="{% url 'barang' %}"
                  class="flex items-center w-full p-2 text-gray-500 transition duration-75 rounded-lg pl-11 group hover:bg-customBlue hover:text-white focus:bg-customBlue focus:text-white dark:text-gray-400 dark:hover:text-white dark:focus:text-white dark:hover:bg-customBlue"
                  >Barang</a
                >
              </li>
              <li>
                <a
                  href="{% url 'transaksi_masuk' %}"
                  class="flex items-center w-full p-2 text-gray-500 transition duration-75 rounded-lg pl-11 group hover:bg-customBlue hover:text-white focus:bg-customBlue focus:text-white dark:text-gray-400 dark:hover:text-white dark:focus:text-white dark:hover:bg-customBlue"
                  >Transaksi Masuk</a
                >
              </li>
              <li>
                <a
                  href="{% url 'transaksi_keluar' %}"
                  class="flex items-center w-full p-2 text-gray-500 transition duration-75 rounded-lg pl-11 group hover:bg-customBlue hover:text-white focus:bg-customBlue focus:text-white dark:text-gray-400 dark:hover:text-white dark:focus:text-white dark:hover:bg-customBlue"
                  >Transaksi Keluar</a
                >
              </li>
            </ul>
          </li>
          <li>
            <a
              href="{% url 'admin_katalog' %}"
              class="flex items-center p-2 rounded-lg group text-gray-500 dark:text-gray-400 hover:text-white hover:bg-customBlue focus:text-white dark:hover:text-white dark:focus:text-white focus:bg-customBlue dark:hover:bg-customBlue {% if '/katalog' in request.path %}text-white bg-customBlue {% endif %}"
            >
              <svg
                class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-white group-focus:text-white dark:group-hover:text-white {% if '/katalog' in request.path %}text-white{% endif %}"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 20 20"
                fill="none"
              >
                <path
                  d="M7.08301 10.4165L12.9163 10.4165"
                  stroke="currentColor"
                  stroke-linecap="round"
                />
                <path
                  d="M7.08301 12.9165L10.4163 12.9165"
                  stroke="currentColor"
                  stroke-linecap="round"
                />
                <path
                  d="M4.58301 5.31651C4.58301 4.47643 4.58301 4.05639 4.7465 3.73552C4.89031 3.45328 5.11978 3.2238 5.40202 3.07999C5.72289 2.9165 6.14293 2.9165 6.98301 2.9165H10.2556C10.6224 2.9165 10.8059 2.9165 10.9785 2.95795C11.1316 2.99469 11.2779 3.0553 11.4121 3.13754C11.5635 3.23031 11.6932 3.36002 11.9526 3.61945L14.7134 6.38023C14.9728 6.63965 15.1025 6.76937 15.1953 6.92074C15.2775 7.05495 15.3382 7.20127 15.3749 7.35432C15.4163 7.52695 15.4163 7.7104 15.4163 8.07728V14.6832C15.4163 15.5232 15.4163 15.9433 15.2529 16.2642C15.109 16.5464 14.8796 16.7759 14.5973 16.9197C14.2765 17.0832 13.8564 17.0832 13.0163 17.0832H6.98301C6.14293 17.0832 5.72289 17.0832 5.40202 16.9197C5.11978 16.7759 4.89031 16.5464 4.7465 16.2642C4.58301 15.9433 4.58301 15.5232 4.58301 14.6832V5.31651Z"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.5"
                />
                <path
                  d="M10.417 2.9165V5.5165C10.417 6.35658 10.417 6.77662 10.5805 7.09749C10.7243 7.37973 10.9538 7.6092 11.236 7.75301C11.5569 7.9165 11.9769 7.9165 12.817 7.9165H15.417"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="1.5"
                />
              </svg>
              <span class="flex-1 ms-3 whitespace-nowrap">Katalog</span>
            </a>
          </li>
          <li>
            <a
              href="{% url 'supplier' %}"
              class="flex items-center p-2 rounded-lg group text-gray-500 dark:text-gray-400 hover:text-white hover:bg-customBlue focus:text-white dark:hover:text-white dark:focus:text-white focus:bg-customBlue dark:hover:bg-customBlue {% if '/supplier' in request.path %}text-white bg-customBlue {% endif %}"
            >
              <svg
                class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-white group-focus:text-white dark:group-hover:text-white {% if '/supplier' in request.path %}text-white{% endif %}"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="21"
                viewBox="0 0 20 21"
                fill="none"
              >
                <path
                  d="M12.5 18V13.5C12.5 13.0333 12.5 12.7999 12.4092 12.6217C12.3293 12.4649 12.2018 12.3374 12.045 12.2575C11.8667 12.1667 11.6334 12.1667 11.1667 12.1667H8.83333C8.36662 12.1667 8.13327 12.1667 7.95501 12.2575C7.79821 12.3374 7.67072 12.4649 7.59083 12.6217C7.5 12.7999 7.5 13.0333 7.5 13.5V18M2.5 6.33333C2.5 7.71405 3.61929 8.83333 5 8.83333C6.38071 8.83333 7.5 7.71405 7.5 6.33333C7.5 7.71405 8.61929 8.83333 10 8.83333C11.3807 8.83333 12.5 7.71405 12.5 6.33333C12.5 7.71405 13.6193 8.83333 15 8.83333C16.3807 8.83333 17.5 7.71405 17.5 6.33333M5.16667 18H14.8333C15.7668 18 16.2335 18 16.59 17.8183C16.9036 17.6586 17.1586 17.4036 17.3183 17.09C17.5 16.7335 17.5 16.2668 17.5 15.3333V5.66667C17.5 4.73325 17.5 4.26654 17.3183 3.91002C17.1586 3.59641 16.9036 3.34144 16.59 3.18166C16.2335 3 15.7668 3 14.8333 3H5.16667C4.23325 3 3.76654 3 3.41002 3.18166C3.09641 3.34144 2.84144 3.59641 2.68166 3.91002C2.5 4.26654 2.5 4.73325 2.5 5.66667V15.3333C2.5 16.2668 2.5 16.7335 2.68166 17.09C2.84144 17.4036 3.09641 17.6586 3.41002 17.8183C3.76654 18 4.23325 18 5.16667 18Z"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span class="flex-1 ms-3 whitespace-nowrap">Supplier</span>
            </a>
          </li>
          <li>
            <a
              href="{% url 'customer' %}"
              class="flex items-center p-2 rounded-lg group text-gray-500 dark:text-gray-400 hover:text-white hover:bg-customBlue focus:text-white dark:hover:text-white dark:focus:text-white focus:bg-customBlue dark:hover:bg-customBlue {% if '/customer' in request.path %}text-white bg-customBlue {% endif %}"
            >
              <svg
                class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-white group-focus:text-white dark:group-hover:text-white {% if '/customer' in request.path %}text-white {% endif %}"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="17"
                viewBox="0 0 20 17"
                fill="none"
              >
                <path
                  d="M18.3337 16V14.3333C18.3337 12.7801 17.2713 11.4751 15.8337 11.105M12.917 1.2423C14.1386 1.73679 15.0003 2.93443 15.0003 4.33333C15.0003 5.73224 14.1386 6.92988 12.917 7.42437M14.167 16C14.167 14.4469 14.167 13.6703 13.9133 13.0577C13.5749 12.241 12.926 11.592 12.1093 11.2537C11.4967 11 10.7201 11 9.16699 11H6.66699C5.11385 11 4.33728 11 3.72471 11.2537C2.90795 11.592 2.25904 12.241 1.92073 13.0577C1.66699 13.6703 1.66699 14.4469 1.66699 16M11.2503 4.33333C11.2503 6.17428 9.75794 7.66667 7.91699 7.66667C6.07604 7.66667 4.58366 6.17428 4.58366 4.33333C4.58366 2.49238 6.07604 1 7.91699 1C9.75794 1 11.2503 2.49238 11.2503 4.33333Z"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span class="flex-1 ms-3 whitespace-nowrap">Customer</span>
            </a>
          </li>
          <li>
            <button
              type="button"
              class="flex items-center w-full p-2 text-base transition duration-75 rounded-lg group text-gray-500 dark:text-gray-400 hover:text-white hover:bg-customBlue focus:text-white dark:hover:text-white dark:focus:text-white focus:bg-customBlue dark:hover:bg-customBlue {% if '/pembelian' in request.path %}text-white bg-customBlue {% endif %}"
              aria-controls="dropdown-pembelian"
              data-collapse-toggle="dropdown-pembelian"
            >
              <svg
                class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-white group-focus:text-white dark:group-hover:text-white {% if '/pembelian' in request.path %}text-white {% endif %}"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="21"
                viewBox="0 0 20 21"
                fill="none"
              >
                <path
                  d="M1.66699 2.16663H2.75546C2.96048 2.16663 3.06299 2.16663 3.14548 2.20433C3.21817 2.23755 3.27978 2.29098 3.32295 2.35825C3.37194 2.43458 3.38644 2.53606 3.41543 2.73901L3.80985 5.49996M3.80985 5.49996L4.68643 11.9428C4.79766 12.7604 4.85328 13.1692 5.04874 13.4769C5.22097 13.7481 5.46789 13.9637 5.75979 14.0978C6.09104 14.25 6.50361 14.25 7.32875 14.25H14.4603C15.2458 14.25 15.6385 14.25 15.9595 14.1086C16.2424 13.984 16.4852 13.7832 16.6606 13.5285C16.8594 13.2396 16.9329 12.8538 17.0799 12.0823L18.1829 6.29137C18.2346 6.0198 18.2605 5.88401 18.223 5.77788C18.1901 5.68477 18.1253 5.60636 18.0399 5.55664C17.9427 5.49996 17.8045 5.49996 17.528 5.49996H3.80985ZM8.33366 18C8.33366 18.4602 7.96056 18.8333 7.50033 18.8333C7.04009 18.8333 6.66699 18.4602 6.66699 18C6.66699 17.5397 7.04009 17.1666 7.50033 17.1666C7.96056 17.1666 8.33366 17.5397 8.33366 18ZM15.0003 18C15.0003 18.4602 14.6272 18.8333 14.167 18.8333C13.7068 18.8333 13.3337 18.4602 13.3337 18C13.3337 17.5397 13.7068 17.1666 14.167 17.1666C14.6272 17.1666 15.0003 17.5397 15.0003 18Z"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span class="flex-1 ms-3 text-left whitespace-nowrap"
                >Pembelian</span
              >
              <svg
                class="w-3 h-3"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 10 6"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="m1 1 4 4 4-4"
                />
              </svg>
            </button>
            <ul id="dropdown-pembelian" class="hidden py-2 space-y-2">
              <li>
                <a
                  href="{% url 'invoice' %}"
                  class="flex items-center w-full p-2 text-gray-500 transition duration-75 rounded-lg pl-11 group hover:bg-customBlue hover:text-white focus:bg-customBlue focus:text-white dark:text-gray-400 dark:hover:text-white dark:focus:text-white dark:hover:bg-customBlue"
                  >Invoice</a
                >
              </li>
              <li>
                <a
                  href="{% url 'retur_beli' %}"
                  class="flex items-center w-full p-2 text-gray-500 transition duration-75 rounded-lg pl-11 group hover:bg-customBlue hover:text-white focus:bg-customBlue focus:text-white dark:text-gray-400 dark:hover:text-white dark:focus:text-white dark:hover:bg-customBlue"
                  >Retur</a
                >
              </li>
              <li>
                <a
                  href="{% url 'pembayaran_hutang' %}"
                  class="flex items-center w-full p-2 text-gray-500 transition duration-75 rounded-lg pl-11 group hover:bg-customBlue hover:text-white focus:bg-customBlue focus:text-white dark:text-gray-400 dark:hover:text-white dark:focus:text-white dark:hover:bg-customBlue"
                  >Pembayaran</a
                >
              </li>
            </ul>
          </li>
          <li>
            <button
              type="button"
              class="flex items-center w-full p-2 text-base transition duration-75 rounded-lg group text-gray-500 dark:text-gray-400 hover:text-white hover:bg-customBlue focus:text-white dark:hover:text-white dark:focus:text-white focus:bg-customBlue dark:hover:bg-customBlue {% if '/penjualan' in request.path %}text-white bg-customBlue {% endif %}"
              aria-controls="dropdown-penjualan"
              data-collapse-toggle="dropdown-penjualan"
            >
              <svg
                class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-white group-focus:text-white dark:group-hover:text-white {% if '/penjualan' in request.path %}text-white {% endif %}"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="21"
                viewBox="0 0 20 21"
                fill="none"
              >
                <path
                  d="M17.6757 13.7416C17.1455 14.9954 16.3163 16.1002 15.2606 16.9594C14.2048 17.8186 12.9546 18.4062 11.6194 18.6706C10.2841 18.9351 8.90435 18.8684 7.60078 18.4765C6.29722 18.0845 5.10952 17.3792 4.14151 16.4222C3.17351 15.4652 2.45467 14.2856 2.04786 12.9866C1.64104 11.6876 1.55863 10.3087 1.80783 8.9705C2.05702 7.63229 2.63024 6.3755 3.47737 5.31C4.32449 4.2445 5.41973 3.40274 6.66733 2.85831M17.6997 7.31095C18.0333 8.11633 18.2379 8.96778 18.3073 9.83401C18.3245 10.048 18.3331 10.155 18.2906 10.2514C18.2551 10.3319 18.1848 10.4081 18.1073 10.4499C18.0147 10.5 17.8989 10.5 17.6673 10.5H10.6673C10.434 10.5 10.3173 10.5 10.2282 10.4546C10.1498 10.4146 10.086 10.3509 10.0461 10.2725C10.0007 10.1833 10.0007 10.0667 10.0007 9.83331V2.83331C10.0007 2.60175 10.0007 2.48598 10.0507 2.3933C10.0925 2.31588 10.1687 2.24555 10.2492 2.21005C10.3456 2.16756 10.4526 2.17614 10.6666 2.1933C11.5329 2.26274 12.3843 2.46738 13.1897 2.80098C14.2007 3.21977 15.1194 3.8336 15.8932 4.60742C16.667 5.38124 17.2809 6.2999 17.6997 7.31095Z"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span class="flex-1 ms-3 text-left whitespace-nowrap"
                >Penjualan</span
              >
              <svg
                class="w-3 h-3"
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 10 6"
              >
                <path
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="m1 1 4 4 4-4"
                />
              </svg>
            </button>
            <ul id="dropdown-penjualan" class="hidden py-2 space-y-2">
              <li>
                <a
                  href="{% url 'faktur' %}"
                  class="flex items-center w-full p-2 text-gray-500 transition duration-75 rounded-lg pl-11 group hover:bg-customBlue hover:text-white focus:bg-customBlue focus:text-white dark:text-gray-400 dark:hover:text-white dark:focus:text-white dark:hover:bg-customBlue"
                  >Faktur</a
                >
              </li>
              <li>
                <a
                  href="{% url 'retur_jual' %}"
                  class="flex items-center w-full p-2 text-gray-500 transition duration-75 rounded-lg pl-11 group hover:bg-customBlue hover:text-white focus:bg-customBlue focus:text-white dark:text-gray-400 dark:hover:text-white dark:focus:text-white dark:hover:bg-customBlue"
                  >Retur</a
                >
              </li>
              <li>
                <a
                  href="{% url 'pembayaran_piutang' %}"
                  class="flex items-center w-full p-2 text-gray-500 transition duration-75 rounded-lg pl-11 group hover:bg-customBlue hover:text-white focus:bg-customBlue focus:text-white dark:text-gray-400 dark:hover:text-white dark:focus:text-white dark:hover:bg-customBlue"
                  >Pembayaran</a
                >
              </li>
            </ul>
          </li>
          <li>
            <a
              href="{% url 'bantuan' %}"
              class="flex items-center p-2 rounded-lg group text-gray-500 dark:text-gray-400 hover:text-white hover:bg-customBlue focus:text-white dark:hover:text-white dark:focus:text-white focus:bg-customBlue dark:hover:bg-customBlue {% if '/bantuan' in request.path %}text-white bg-customBlue {% endif %}"
            >
              <svg
                class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-white group-focus:text-white dark:group-hover:text-white {% if '/bantuan/' in request.path %}text-white{% endif %}"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="21"
                viewBox="0 0 20 21"
                fill="none"
              >
                <path
                  d="M7.57533 7.99996C7.77125 7.44302 8.15795 6.97338 8.66695 6.67424C9.17596 6.37509 9.77441 6.26574 10.3563 6.36555C10.9382 6.46536 11.466 6.7679 11.8462 7.21957C12.2264 7.67124 12.4345 8.24289 12.4337 8.83329C12.4337 10.5 9.93366 11.3333 9.93366 11.3333M10.0003 14.6666H10.0087M18.3337 10.5C18.3337 15.1023 14.6027 18.8333 10.0003 18.8333C5.39795 18.8333 1.66699 15.1023 1.66699 10.5C1.66699 5.89759 5.39795 2.16663 10.0003 2.16663C14.6027 2.16663 18.3337 5.89759 18.3337 10.5Z"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span class="flex-1 ms-3 whitespace-nowrap">Bantuan</span>
            </a>
          </li>
        </ul>
      </div>
    </aside>
    <div class="p-4 lg:ml-60 dark:bg-gray-800">
      <h1 class="mt-14 font-semibold text-lg">
        {% block page_title %}{% endblock %}
      </h1>
      <div class="mt-3">
        <!-- Overlay & Modal Konfirmasi -->
<div id="popupModalConfirm" class="fixed inset-0 hidden items-center justify-center z-50 bg-gray-500/50">
  <div class="bg-white p-6 rounded-lg shadow-lg flex flex-col">
    <div class="flex justify-between items-center border-b pb-3">
      <h3 class="text-lg font-semibold" id="confirmTitle">Konfirmasi Hapus</h3>
      <button onclick="closeModalConfirm()" class="text-gray-500 hover:text-red-500">
        <i class="fa-solid fa-x"></i>
      </button>
    </div>
    <div class="py-4">
      <p id="confirmMessage">Apakah Anda yakin ingin melanjutkan?</p>
    </div>
    <div class="flex justify-end gap-2 mt-4">
      <button onclick="closeModalConfirm()" class="px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400">
        Batal
      </button>
      <button id="confirmAction" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">
        Hapus
      </button>
    </div>
  </div>
</div>
        {% block content %}{% endblock %}
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.46.0/dist/apexcharts.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/2.2.2/js/dataTables.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    {% block script %}{% endblock %}
    <script>
        //PopupModal Akun
        function openModalAkun() {
          let modal = document.getElementById("popupModalAkun");
          let dropdownAvatar = document.getElementById("dropdownAvatarName");
          dropdownAvatar.classList.remove("block");
          dropdownAvatarName.classList.add("hidden");
          modal.classList.remove("hidden");
          modal.classList.add("flex");
      }

      function closeModalAkun() {
          let modal = document.getElementById("popupModalAkun");
          modal.classList.remove("flex");
          modal.classList.add("hidden");
      }

      {% comment %} Grafik Pendapatan Bulanan {% endcomment %}
      const income_options = {
        // set the labels option to true to show the labels on the X and Y axis
        xaxis: {
          show: true,
          categories: ['Minggu ke-1', 'Minggu ke-2', 'Minggu ke-3', 'Minggu ke-4'],
          labels: {
            show: true,
            style: {
              fontFamily: "Inter, sans-serif",
              cssClass: 'text-xs font-normal fill-gray-500 dark:fill-gray-400'
            }
          },
          axisBorder: {
            show: true,
          },
          axisTicks: {
            show: false,
          },
        },
        yaxis: {
          show: true,
          labels: {
            show: true,
            style: {
              fontFamily: "Inter, sans-serif",
              cssClass: 'text-xs font-normal fill-gray-500 dark:fill-gray-400'
            },
            formatter: function (value) {
              return value + 'jt';
            }
          }
        },
        series: [
          {
            name: "Pendapatan Bulanan",
            data: [12, 8, 16, 14],
            color: "#3D5A80",
          }
        ],
        chart: {
          sparkline: {
            enabled: false
          },
          height: "100%",
          width: "100%",
          type: "area",
          fontFamily: "Inter, sans-serif",
          dropShadow: {
            enabled: false,
          },
          toolbar: {
            show: false,
          },
        },
        tooltip: {
          enabled: true,
          x: {
            show: false,
          },
        },
        fill: {
          type: "gradient",
          gradient: {
            opacityFrom: 0.55,
            opacityTo: 0,
            shade: "#1C64F2",
            gradientToColors: ["#1C64F2"],
          },
        },
        dataLabels: {
          enabled: false,
        },
        stroke: {
          width: 4,
        },
        legend: {
          show: false
        },
        grid: {
          show: true,
        },
        }

        if (document.getElementById("income-chart") && typeof ApexCharts !== 'undefined') {
        const chart = new ApexCharts(document.getElementById("income-chart"), income_options);
        chart.render();
        }

        {% comment %} Grafik Pengeluaran {% endcomment %}
        const expense_options = {
          // set the labels option to true to show the labels on the X and Y axis
          xaxis: {
            show: true,
            categories: ['Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu', 'Minggu'],
            labels: {
              show: true,
              style: {
                fontFamily: "Inter, sans-serif",
                cssClass: 'text-xs font-normal fill-gray-500 dark:fill-gray-400'
              }
            },
            axisBorder: {
              show: true,
            },
            axisTicks: {
              show: false,
            },
          },
          yaxis: {
            show: true,
            labels: {
              show: true,
              style: {
                fontFamily: "Inter, sans-serif",
                cssClass: 'text-xs font-normal fill-gray-500 dark:fill-gray-400'
              },
              formatter: function (value) {
                return value + 'jt';
              }
            }
          },
          series: [
            {
              name: "Pengeluaran Bulanan",
              data: [5, 4, 6, 9, 4, 3, 3.5],
              color: "#EE6C4D",
            }
          ],
          chart: {
            sparkline: {
              enabled: false
            },
            height: "100%",
            width: "100%",
            type: "area",
            fontFamily: "Inter, sans-serif",
            dropShadow: {
              enabled: false,
            },
            toolbar: {
              show: false,
            },
          },
          tooltip: {
            enabled: true,
            x: {
              show: false,
            },
          },
          fill: {
            type: "gradient",
            gradient: {
              opacityFrom: 0.55,
              opacityTo: 0,
              shade: "#E5C2BA",
              gradientToColors: ["#E5C2BA"],
            },
          },
          dataLabels: {
            enabled: false,
          },
          stroke: {
            width: 4,
          },
          legend: {
            show: false
          },
          grid: {
            show: true,
          },
          }

          if (document.getElementById("expense-chart") && typeof ApexCharts !== 'undefined') {
            const chart = new ApexCharts(document.getElementById("expense-chart"), expense_options);
            chart.render();
            }

          {% comment %} Pie Chart Laku {% endcomment %}
          const getChartOptions = () => {
            // Data lengkap (lebih dari 10 produk)
            const data = [
              { label: "Kampas", value: 200, color: "#293241" },
              { label: "Ban", value: 192, color: "#3D5A80" },
              { label: "Oil Mesin", value: 180, color: "#8FA4BF" },
              { label: "Rantai", value: 165, color: "#77AECE" },
              { label: "Filter", value: 142, color: "#98C1D9" },
              { label: "Bearing", value: 65, color: "#3F83F8" },
              { label: "Busi", value: 130, color: "#E0FBFC" },
              { label: "Aki", value: 126, color: "#58A2CD" },
              { label: "Shockbreaker", value: 123, color: "#B8C9E0" },
              { label: "Lampu", value: 116, color: "#D6DCE4" },
              { label: "Spion", value: 98, color: "#115EC3" },
              { label: "Velg", value: 75, color: "#F472B6" },
            ];

            // Urutkan data dari yang terbesar ke yang terkecil
            const sortedData = data.sort((a, b) => b.value - a.value);

            // Ambil hanya 10 produk terlaku
            const top10Data = sortedData.slice(0, 10);

            // Pisahkan data untuk chart
            const labels = top10Data.map((item) => item.label);
            const series = top10Data.map((item) => item.value);
            const colors = top10Data.map((item) => item.color);

            return {
              series: series,
              colors: colors,
              chart: {
                height: 250,
                width: "100%",
                type: "pie",
              },
              stroke: {
                colors: ["transparent"],
              },
              labels: labels,
              dataLabels: {
                enabled: false,
                style: {
                  fontFamily: "Inter, sans-serif",
                },
              },
              legend: {
                fontFamily: "Inter, sans-serif",
                formatter: function (label, opts) {
                  return `${label}: ${opts.w.globals.series[opts.seriesIndex]} sold`; // Tampilkan jumlah sold di legend
                },
                horizontalAlign: "center",
              },
            };
          };

          if (document.getElementById("pie-laku") && typeof ApexCharts !== 'undefined') {
            const chart = new ApexCharts(document.getElementById("pie-laku"), getChartOptions());
            chart.render();
          }

          {% comment %} Pie Chart Tak Laku {% endcomment %}
          const getPieTLaku = () => {
            // Data lengkap (lebih dari 10 produk)
            const data = [
              { label: "Kampas", value: 200, color: "#293241" },
              { label: "Ban", value: 192, color: "#3D5A80" },
              { label: "Oil Mesin", value: 180, color: "#8FA4BF" },
              { label: "Rantai", value: 165, color: "#77AECE" },
              { label: "Filter", value: 142, color: "#98C1D9" },
              { label: "Bearing", value: 65, color: "#3F83F8" },
              { label: "Busi", value: 130, color: "#E0FBFC" },
              { label: "Aki", value: 126, color: "#58A2CD" },
              { label: "Shockbreaker", value: 123, color: "#B8C9E0" },
              { label: "Lampu", value: 116, color: "#D6DCE4" },
              { label: "Spion", value: 98, color: "#115EC3" },
              { label: "Velg", value: 75, color: "#F472B6" },
            ];

            // Urutkan data dari yang terbesar ke yang terkecil
            const sortedData = data.sort((a, b) => b.value - a.value);

            // Ambil hanya 10 produk terlaku
            const top10Data = sortedData.slice(0, 10);

            // Pisahkan data untuk chart
            const labels = top10Data.map((item) => item.label);
            const series = top10Data.map((item) => item.value);
            const colors = top10Data.map((item) => item.color);

            return {
              series: series,
              colors: colors,
              chart: {
                height: 250,
                width: "100%",
                type: "pie",
              },
              stroke: {
                colors: ["transparent"],
              },
              labels: labels,
              dataLabels: {
                enabled: false,
                style: {
                  fontFamily: "Inter, sans-serif",
                },
              },
              legend: {
                fontFamily: "Inter, sans-serif",
                formatter: function (label, opts) {
                  return `${label}: ${opts.w.globals.series[opts.seriesIndex]} sold`; // Tampilkan jumlah sold di legend
                },
                horizontalAlign: "center",
              },
            };
          };

          if (document.getElementById("pie-tlaku") && typeof ApexCharts !== 'undefined') {
            const chart = new ApexCharts(document.getElementById("pie-tlaku"), getPieTLaku());
            chart.render();
          }

          {% comment %} Pie Chart Hampir Habis {% endcomment %}
          const getPieHabis = () => {
            // Data lengkap (lebih dari 10 produk)
            const data = [
              { label: "Kampas", value: 200, color: "#293241" },
              { label: "Ban", value: 192, color: "#3D5A80" },
              { label: "Oil Mesin", value: 180, color: "#8FA4BF" },
              { label: "Rantai", value: 165, color: "#77AECE" },
              { label: "Filter", value: 142, color: "#98C1D9" },
              { label: "Bearing", value: 65, color: "#3F83F8" },
              { label: "Busi", value: 130, color: "#E0FBFC" },
              { label: "Aki", value: 126, color: "#58A2CD" },
              { label: "Shockbreaker", value: 123, color: "#B8C9E0" },
              { label: "Lampu", value: 116, color: "#D6DCE4" },
              { label: "Spion", value: 98, color: "#115EC3" },
              { label: "Velg", value: 75, color: "#F472B6" },
            ];

            // Urutkan data dari yang terbesar ke yang terkecil
            const sortedData = data.sort((a, b) => b.value - a.value);

            // Ambil hanya 10 produk terlaku
            const top10Data = sortedData.slice(0, 10);

            // Pisahkan data untuk chart
            const labels = top10Data.map((item) => item.label);
            const series = top10Data.map((item) => item.value);
            const colors = top10Data.map((item) => item.color);

            return {
              series: series,
              colors: colors,
              chart: {
                height: 250,
                width: "100%",
                type: "pie",
              },
              stroke: {
                colors: ["transparent"],
              },
              labels: labels,
              dataLabels: {
                enabled: false,
                style: {
                  fontFamily: "Inter, sans-serif",
                },
              },
              legend: {
                fontFamily: "Inter, sans-serif",
                formatter: function (label, opts) {
                  return `${label}: ${opts.w.globals.series[opts.seriesIndex]} sold`; // Tampilkan jumlah sold di legend
                },
                horizontalAlign: "center",
              },
            };
          };

          if (document.getElementById("pie-habis") && typeof ApexCharts !== 'undefined') {
            const chart = new ApexCharts(document.getElementById("pie-habis"), getPieHabis());
            chart.render();
          }

          {% comment %} Pie Chart Tak Laku {% endcomment %}
          const getPieCustomer = () => {
            // Data lengkap (lebih dari 10 produk)
            const data = [
              { label: "Kampas", value: 200, color: "#293241" },
              { label: "Ban", value: 192, color: "#3D5A80" },
              { label: "Oil Mesin", value: 180, color: "#8FA4BF" },
              { label: "Rantai", value: 165, color: "#77AECE" },
              { label: "Filter", value: 142, color: "#98C1D9" },
              { label: "Bearing", value: 65, color: "#3F83F8" },
              { label: "Busi", value: 130, color: "#E0FBFC" },
              { label: "Aki", value: 126, color: "#58A2CD" },
              { label: "Shockbreaker", value: 123, color: "#B8C9E0" },
              { label: "Lampu", value: 116, color: "#D6DCE4" },
              { label: "Spion", value: 98, color: "#115EC3" },
              { label: "Velg", value: 75, color: "#F472B6" },
            ];

            // Urutkan data dari yang terbesar ke yang terkecil
            const sortedData = data.sort((a, b) => b.value - a.value);

            // Ambil hanya 10 produk terlaku
            const top10Data = sortedData.slice(0, 10);

            // Pisahkan data untuk chart
            const labels = top10Data.map((item) => item.label);
            const series = top10Data.map((item) => item.value);
            const colors = top10Data.map((item) => item.color);

            return {
              series: series,
              colors: colors,
              chart: {
                height: 250,
                width: "100%",
                type: "pie",
              },
              stroke: {
                colors: ["transparent"],
              },
              labels: labels,
              dataLabels: {
                enabled: false,
                style: {
                  fontFamily: "Inter, sans-serif",
                },
              },
              legend: {
                fontFamily: "Inter, sans-serif",
                formatter: function (label, opts) {
                  return `${label}: ${opts.w.globals.series[opts.seriesIndex]} sold`; // Tampilkan jumlah sold di legend
                },
                horizontalAlign: "center",
              },
            };
          };

          if (document.getElementById("pie-customer") && typeof ApexCharts !== 'undefined') {
            const chart = new ApexCharts(document.getElementById("pie-customer"), getPieCustomer());
            chart.render();
          }

        {% comment %} tabel {% endcomment %}

        $(document).ready(function () {
          let table = $('#allpesanan').DataTable({
              pageLength: 20,
              lengthChange: false, // Hilangkan "Show entries"
              ordering: false,
              scrollX: true,
              "columnDefs": [
            { className: "text-center", targets: [-1, -2] } // kolom 8 dan 9 di tengah
        ],
          });
          $('.dt-search').remove();
          $('.dt-info').remove();

          $('#tableSearch').on('keyup', function () { //search
            let searchValue = $(this).val();
            table.search(searchValue).draw();
          });
        });

        $(document).ready(function () {
          let table = $('#detailBrg').DataTable({
              pageLength: 20,
              lengthChange: false, // Hilangkan "Show entries"
              ordering: false,
              scrollX: true,
              "columnDefs": [
            { className: "text-center", targets: [-1, -2] } // kolom 8 dan 9 di tengah
        ],
          });
          $('.dt-search').remove();
          $('.dt-info').remove();

          $('#tableSearch').on('keyup', function () { //search
            let searchValue = $(this).val();
            table.search(searchValue).draw();
          });

          $('#kodebrg-dropdown').select2({
            dropdownAutoWidth: true,
            width: '100%',
            templateSelection: function (data) {
                return data.id || ''; // Hanya menampilkan kode barang setelah dipilih
            }
        }); //dropdown

          let barangData = {};
          let hargaData = {};

          $.ajax({
            url: '/pesanan/tambah/',
            method: 'GET',
            headers: { 'X-Requested-With': 'XMLHttpRequest' },
            success: function(data) {
              let kodeDropdown = $('#kodebrg-dropdown');
              let namaBrg = $('#namaBrg');

              kodeDropdown.empty();
              namaBrg.empty();
              kodeDropdown.append('<option value=""></option>');
              namaBrg.append('-');

              $.each(data, function(index, item) {
                  barangData[item.kode] = item.nama;
                  hargaData[item.kode] = item.harga;
                  kodeDropdown.append('<option value="' + item.kode + '" data-nama="' + item.nama + '">' + item.kode + ' - ' + item.nama + '</option>');
              });
            },
            error: function() {
                alert('Gagal mengambil data barang.');
            }
        });
        $('#kodebrg-dropdown').on('change', function() {
          let selectedKode = $(this).val();
          let namaBarang = barangData[selectedKode] || '';
          let hargaBarang = hargaData[selectedKode] || '';

          let inputHargaBrg = $('#input_hrgbrg');
          let namaBrg = $('#namaBrg');
          namaBrg.empty();
          namaBrg.append(namaBarang);
          namaBrg.val(namaBarang).trigger('change');

          inputHargaBrg.empty();
          inputHargaBrg.val(hargaBarang).trigger('change');
      });
        });
    </script>
  </body>
</html>
